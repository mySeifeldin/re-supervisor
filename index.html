<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RE-AI | Premium Supervisor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body { background-color: #020617; color: #f8fafc; font-family: 'Inter', sans-serif; }
        .glass-card { background: rgba(30, 41, 59, 0.4); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.05); }
        .sidebar-item { transition: all 0.2s; border-radius: 12px; margin: 4px 0; border: none; background: transparent; cursor: pointer; text-align: left; color: #94a3b8; }
        .sidebar-item:hover, .sidebar-item.active { background: #3b82f6; color: white; }
    </style>
</head>
<body class="flex h-screen overflow-hidden">

    <aside class="w-64 glass-card h-full p-6 flex flex-col border-r border-gray-800">
        <div class="mb-10 px-2">
            <h1 class="text-2xl font-black tracking-tighter text-blue-500">REAL<span class="text-white">ESTATE</span></h1>
            <p class="text-xs text-gray-500 font-bold uppercase tracking-widest">Supervisor Hub</p>
        </div>

        <nav class="flex-1">
            <button onclick="showTab('dashboard', event)" class="sidebar-item active w-full flex items-center p-3 gap-3">
                <i class="fas fa-chart-pie"></i> Dashboard
            </button>
            <button onclick="showTab('projects', event)" class="sidebar-item w-full flex items-center p-3 gap-3">
                <i class="fas fa-building"></i> Projects
            </button>
            <button onclick="showTab('units', event)" class="sidebar-item w-full flex items-center p-3 gap-3">
                <i class="fas fa-door-open"></i> Units
            </button>
            <button onclick="showTab('brokers', event)" class="sidebar-item w-full flex items-center p-3 gap-3">
                <i class="fas fa-user-tie"></i> Brokers
            </button>
            <button onclick="showTab('clients', event)" class="sidebar-item w-full flex items-center p-3 gap-3">
                <i class="fas fa-users"></i> Deals & Clients
            </button>
        </nav>

        <div class="mt-auto pt-6 border-t border-gray-800 text-[10px] text-gray-500">
            CSV HINT: UnitID, ProjID, Type, Price, Sqm, Status, Images
        </div>
    </aside>

    <main class="flex-1 overflow-y-auto p-10 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-blue-900/10 via-slate-950 to-slate-950">
        
        <section id="tab-dashboard">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-10">
                <div class="glass-card p-8 rounded-3xl relative overflow-hidden">
                    <div class="absolute top-0 right-0 p-4 opacity-10"><i class="fas fa-building text-6xl"></i></div>
                    <p class="text-gray-400 text-xs font-bold uppercase mb-2">Portfolio Projects</p>
                    <h2 id="count-projects" class="text-5xl font-black">--</h2>
                </div>
                <div class="glass-card p-8 rounded-3xl border-b-4 border-blue-500">
                    <p class="text-gray-400 text-xs font-bold uppercase mb-2">Available Inventory</p>
                    <h2 id="count-units" class="text-5xl font-black text-blue-400">--</h2>
                </div>
                <div class="glass-card p-8 rounded-3xl border-b-4 border-purple-500">
                    <p class="text-gray-400 text-xs font-bold uppercase mb-2">AI Tracked Deals</p>
                    <h2 id="count-deals" class="text-5xl font-black text-purple-400">--</h2>
                </div>
            </div>
            
            <div class="glass-card rounded-3xl p-8">
                <h3 class="text-xl font-bold mb-6">Recent Activity Log</h3>
                <div class="space-y-4" id="recent-activity">
                    <p class="text-gray-500 text-sm italic">Connecting to Google Sheets via JSONP...</p>
                </div>
            </div>
        </section>

        <section id="tab-projects" class="hidden">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-3xl font-bold">Project Management</h2>
                <button class="bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded-xl text-sm font-bold transition-all">Add Project</button>
            </div>
            <div class="glass-card rounded-2xl overflow-hidden">
                <table class="w-full text-left">
                    <thead class="bg-white/5 text-gray-400 text-xs uppercase font-bold">
                        <tr><th class="p-4">Name</th><th class="p-4">Developer</th><th class="p-4">Area</th><th class="p-4">Action</th></tr>
                    </thead>
                    <tbody id="project-rows"></tbody>
                </table>
            </div>
        </section>

    </main>

    <script>
        const APPS_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbztNYbL5qKJjyk9zwqIzXRIK7-J1YyGFXeeIw0b17rOYiPYuHCVTYgaySWtmvveIV4HaQ/exec"; // PASTE NEW URL HERE
let masterData = {}; // Store data globally so we can switch tabs quickly

function showTab(tabName, event) {
    document.querySelectorAll('section').forEach(s => s.classList.add('hidden'));
    document.querySelectorAll('.sidebar-item').forEach(i => i.classList.remove('active'));
    
    const targetSection = document.getElementById('tab-' + tabName);
    if (targetSection) targetSection.classList.remove('hidden');
    if (event) event.currentTarget.classList.add('active');

    // If we switch to projects or units, render the tables
    if (tabName === 'projects') renderProjects();
    if (tabName === 'units') renderUnits();
}

window.handleData = function(data) {
    masterData = data; // Save the data
    document.getElementById('count-projects').innerText = data.projectsCount || 0;
    document.getElementById('count-units').innerText = data.availableUnits || 0;
    document.getElementById('count-deals').innerText = data.openDeals || 0;
    
    document.getElementById('recent-activity').innerHTML = `
        <p class="text-green-400 text-sm"><i class="fas fa-check-circle"></i> Connection stable. Data synced.</p>`;
};

function renderProjects() {
    const rows = masterData.projectsList || [];
    const container = document.getElementById('project-rows');
    container.innerHTML = ""; // Clear existing

    // Skip header (i=0)
    for (let i = 1; i < rows.length; i++) {
        container.innerHTML += `
            <tr class="border-b border-white/5 hover:bg-white/5 transition">
                <td class="p-4 font-bold text-blue-400">${rows[i][2]}</td>
                <td class="p-4 text-gray-300">${rows[i][3]}</td>
                <td class="p-4 text-gray-400">${rows[i][1]}</td>
                <td class="p-4"><button class="text-xs bg-gray-700 px-2 py-1 rounded">Edit</button></td>
            </tr>`;
    }
}

// Add this to your HTML main section to support the Units tab
function renderUnits() {
    // We will build the Units UI next, it needs a similar table structure in HTML
}

function init() {
    const script = document.createElement('script');
    script.src = `${APPS_SCRIPT_URL}?callback=handleData`;
    document.head.appendChild(script);
}

window.onload = init;
    </script>
</body>
</html>



